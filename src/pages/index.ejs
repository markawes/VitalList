<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - VitalList</title>
    <%- include("./parts/head.ejs") %>
</head>
<body>
    <%- include("./parts/navbar.ejs", { bot, user }) %>
<br><br><br><br>
    <div class="container">
            <center>
            <img class="titlelogo" src="/img/icon.png" alt="VitalList Logo" width="150" height="150">
            <h2 class="title"><b>Vital List</b></h2><p><span class="typing_desc" style="font-size:18px;"></span></p>
 <script>
    new TypeIt(".typing_desc", {
        speed: 90,
        waitUntilVisible: true,
        startDelay: 1000,
    })
    .type("A place where you can find bots, Vital List.")
    .move(-17)
    .type('Discord ')
    .move(4)
    .delete(4)
    .type('servers')
    .move(13)
    .pause(1000)
    .move(-13)
    .delete(7)
    .type('bots')
    .move(13)
    .go()
    </script>
        <div class="form-inline my-2 my-lg-0">
            <input id="search-box" style="margin-left: 425px;border-radius: 8px;" class="form-control" type="text" placeholder="Search" autocomplete="off">
            <button id="search-btn" class="btn btn-light my-2 my-sm-0" style="border-radius: 8px;" type="button">Search</button>
        </div>
    </center>
        <br><br><br>
        <div class="randombots">
            <h4><i class="fa-solid fa-fire-flame-curved"></i> <b>Top Voted Bots</b></h4><p>These are the top voted bots for this month.</p>
            <% let allbots = bots %>
            <% let voted = allbots.sort((a,b) => b.votes - a.votes) %>
                   <% for(let i = 0; i < voted.length; i++){ %>
                                               <%  if (i === 6) break; %>
                                               <div class="row">
                        <div class="col-md-3 mb-3 bot-card-col" style="border-radius: 8px;">
                            <div class="card" style="border-radius: 8px;">
                                <% if (voted[i].avatar) { %>
                                    <img class="card-img-top" style="border-radius: 8px;" src="https://cdn.discordapp.com/avatars/<%= voted[i].id %>/<%= voted[i].avatar %>.png?size=1280" alt="<%= voted[i].name %>">
                                <% } else { %>
                                    <img class="card-img-top" src="https://cdn.discordapp.com/embed/avatars/<%= (voted[i].id % 5) %>.png" alt="<%= voted[i].name %>">
                                <% } %>
                                <div class="card-body">
                                    <h4 class="card-title" style="margin-bottom: 0;"><%= voted[i].name %></h4>
                                    <center>
                                        <div class="badges">
                                            <span style="border-radius: 8px;" class="badge badge-success">Online</span>
                                            <span style="border-radius: 8px;" class="badge badge-primary">Servers: <%= voted[i].servers %></span>
                                            <span style="border-radius: 8px;" class="badge badge-danger">Upvotes: <%= bots[i].votes %></span>
                                        </div>
                                    </center>
                                    <p class="card-text"><%= voted[i].shortDesc.length > 100 ? voted[i].shortDesc.substr(0, 97) + "..." : voted[i].shortDesc %></p>
                                    <div class="btn-group" id="bot-card-bottons" role="group" aria-label="Basic example" style="width: 100%;">
                                        <a href="/bots/<%= bots[i].id %>" style="border-radius: 8px;" type="button" class="btn btn-primary">View</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
        </div>
    </div>
</body>

<style>
.bot-card-avatar {
    width: 100%;
    margin-bottom: 20px;
}

@media screen and (max-width: 757px) {
    .bot-card-col {
        margin: 0 30px;
    }
}
</style>
<script>
    $(function (params) {
      const searchBtn = $("#search-btn");
      searchBtn.click(function (event) {
          event.preventDefault();
          const searchBox = $("#search-box");
          const searchTerm = searchBox.val();
          if(searchTerm) {
              searchBtn.addClass("disabled");
              location.replace(`/search?q=${searchTerm}`);
          }
      });
    });
    </script>
</html>